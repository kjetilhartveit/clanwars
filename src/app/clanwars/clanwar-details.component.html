
<div id="clanwar-details-container">
	<div *ngIf="clanwar">
		<form [formGroup]="form" (ngSubmit)="onSubmit()">
			<table>
				<tr>
					<td>
						<label for="field-clan1">Clan 1:</label>
					</td>
					<td>
						<select id="field-clan1" 
										formControlName="clan1" 
										setInitialSelectedOption 
										required>
							<option *ngFor="let clan of clans" 
											[ngValue]="clan"
											[attr.selected]="clanwar.clan1 === clan">
								{{clan.name}}
							</option>
						</select>
						<cw-form-field-is-required [element]="form.controls.clan1" fieldname="Clan 1"></cw-form-field-is-required>
					</td>
				</tr>
				<tr>
					<td>
						<label for="field-clan2">Clan 2:</label>
					</td>
					<td>
						<select id="field-clan2" 
										formControlName="clan2"
										setInitialSelectedOption
										required>
							<option *ngFor="let clan of clans" 
											[ngValue]="clan"
											[attr.selected]="clanwar.clan2 === clan">
								{{clan.name}}
							</option>
						</select>
						<cw-form-field-is-required [element]="form.controls.clan2" fieldname="Clan 2"></cw-form-field-is-required>
					</td>
				</tr>
				<tr>
					<td>
						<label>Matches:</label>
					</td>
					<td>
						<div formArrayName="matches">
							<div *ngFor="let match of form.controls.matches.controls; let i=index">
								<!-- Angular assigns array index as group name by default 0, 1, 2, ... -->
								<div class="match-control" [formGroupName]="i">
									<span formGroupName="side1">
										<cw-match-side-controls [matchSideGroup]="form.controls.matches.controls[i].controls.side1"
																sideNum="1"></cw-match-side-controls>
									</span>
									<span formGroupName="side2">
										<cw-match-side-controls [matchSideGroup]="form.controls.matches.controls[i].controls.side2"
																sideNum="2"></cw-match-side-controls>
									</span>
								</div>
							</div>
						</div>
					</td>
				</tr>
				<tr>
					<td colspan="2">
						<button [disabled]="!form.valid">Save</button>
					</td>
				</tr>
			</table>
		</form>
	</div>
</div>